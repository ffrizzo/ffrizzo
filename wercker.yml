box: golang
build:
  steps:
    - script:
        name: setup hugo
        code: go get github.com/gohugoio/hugo
    - script:
        name: build main
        code: |
              cd /pipeline/source
              hugo
    - script:
        name: build blog
        code: |
              cd /pipeline/source
              hugo -s blog/ -d $(pwd)/public/blog    
deploy:
  steps:
    - lukevivier/gh-pages:
        token: $GIT_TOKEN
        domain: ffrizzo.com
        basedir: ./public
dev:
  steps:
    - script:
        name: setup hugo
        code: go get github.com/gohugoio/hugo
    - script:
        name: build app
        code: |
              cd /pipeline/source
              hugo
